<?xml version="1.0" encoding="utf-8" ?>

<Patch>
	
   <Operation Class="PatchOperationFindMod">
    <mods>
	   <li>[JDS] Simple Storage</li>
    </mods>
	<match Class="PatchOperationFindMod">
    <mods>
	   <li>Integrated Deep Storage</li>
    </mods>
	<match Class="PatchOperationSequence">
		<operations>
		
			<li Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName = "JDSMilitaryGradeCrateSmall" or 
									defName = "JDSMilitary_Grade_Crate_Small_Pile" or 
									defName = "JDSMilitary_Grade_Crate_Long" or 
									defName = "JDSSilo" or 
									defName = "JDSBank_Vault" or 
									defName = "JDSMilitary_Grade_crate_Large"]/researchPrerequisites</xpath>
				<value>
					<researchPrerequisites Inherit="false">
						<li>MicroelectronicsBasics</li>
						<li>IS_IndustrialStorage</li>
					</researchPrerequisites>
				</value>
			</li>
		
			<li Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName = "JDSMilitary_Grade_crate_Large"]/researchPrerequisites</xpath>
				<value>
					<researchPrerequisites Inherit="false">
						<li>DrugProduction</li>
						<li>IS_IndustrialStorage</li>
					</researchPrerequisites>
				</value>
			</li>
			
			<li Class="PatchOperationFindMod">
				<mods>
				   <li>Vanilla Factions Expanded - Medieval</li>
				</mods>
				<match Class="PatchOperationSequence">
				<operations>
					<li Class="RR.PatchOperationAddOrReplace">
						<xpath>Defs/ResearchProjectDef[defName = "IS_MedievalStorage"]</xpath>
						<value>
							<tags>
								<li>VFEM_MedievalStart</li>
							</tags>
						</value>
					</li>
					<li Class="RR.PatchOperationAddOrReplace">
							<xpath>Defs/ResearchProjectDef[defName = "IS_NeolithicStorage"]</xpath>
							<value>
								<tags>
									<li>VFEM_MedievalStart</li>
								</tags>
							</value>
					</li>
					</operations>
				</match>
			</li>
			
			<li Class="PatchOperationRemove">
					<xpath>Defs/ResearchProjectDef[defName = "IS_ModernStorage" or 
									defName = "IS_PalletsStorage"]/tags</xpath>
			</li>
			
			<li Class="RR.PatchOperationAddOrReplace">
				<xpath>Defs/ResearchProjectDef[defName = "IS_MedievalStorage"]</xpath>
				<value>
					<tags>
						<li>ClassicStart</li>
					</tags>
				</value>
			</li>
					 
			<li Class="RR.PatchOperationAddOrReplace">
					<xpath>Defs/ResearchProjectDef[defName = "IS_NeolithicStorage"]</xpath>
					<value>
						<tags>
							<li>ClassicStart</li>
						</tags>
					</value>
			</li>
			
			<li Class="RR.PatchOperationAddOrReplace">
					<xpath>Defs/ThingDef[defName = "LWM_Medicine_Cabinet"]/researchPrerequisites</xpath>
					<value>
						<li>DrugProduction</li>
					</value>
			</li>
			
		</operations>
	</match>
	<nomatch Class="PatchOperationSequence">
	<operations>
	
		
	   <li Class="RR.PatchOperationAddOrReplace">
				<xpath>Defs/ThingDef[defName = "JDS_Wooden_Crate" or 
								defName = "JDS_Wooden_Crate_Two" or 
								defName = "JDS_Wooden_Crate_Three" or 
								defName = "JDS_Wooden_Crate_four" or 
								defName = "JDS_Wooden_Crate_B" or 
								defName = "JDS_Wooden_Crate_C" or 
								defName = "JDS_Wooden_Barrel" or 
								defName = "JDS_Wooden_Barrel_Pile"]</xpath>
			<value>
				<researchPrerequisites>
					<li>ComplexFurniture</li>
				</researchPrerequisites>
			</value>
		</li>

	
		
	   <li Class="RR.PatchOperationAddOrReplace">
				<xpath>Defs/ThingDef[defName = "JDSmaller_locker" or 
								defName = "JDSLarge_locker"]</xpath>
			<value>
				<researchPrerequisites>
					<li>ComplexFurniture</li>
				</researchPrerequisites>
			</value>
		</li>
		
		
	
	
		<li Class="RR.PatchOperationAddOrReplace">
				<xpath>Defs/ThingDef[defName = "JDSMilitaryGradeCrateSmall" or 
								defName = "JDSMilitary_Grade_Crate_Small_Pile" or 
								defName = "JDSMilitary_Grade_Crate_Long" or 
								defName = "JDSMilitary_Grade_crate_Large"]</xpath>
			<value>
				<researchPrerequisites>
					<li>PrecisionRifling</li>
					<li>Fabrication</li> 
				</researchPrerequisites>
			</value>
		</li>


		
		   <li Class="RR.PatchOperationAddOrReplace">
					<xpath>Defs/ThingDef[defName = "JDS_Metal_Crate" or 
									defName = "JDS_Metal_Crate_Pile" or 
									defName = "JDS_Metal_Crate_Small_Pile" or 
									defName = "JDS_Metal_Crate_Bigger_Pile"]</xpath>
				<value>
					<researchPrerequisites>
						<li>ComplexFurniture</li>
						<li>Smithing</li>
					</researchPrerequisites>
				</value>
			</li>
		

		
		   <li Class="RR.PatchOperationAddOrReplace">
					<xpath>Defs/ThingDef[defName = "JDS_Large_Pallet" or 
									defName = "JDS_Large_Can_Pallet" or 
									defName = "JDS_Large_A_Pallet" or 
									defName = "JDS_Large_B_Pallet" or 
									defName = "JDS_Large_C_Pallet" or 
									defName = "JDS_Large_D_Pallet" or 
									defName = "JDS_Large_E_Pallet" or 
									defName = "JDS_Bulk_Water" or 
									defName = "JDSPallet" or 
									defName = "JDSPallet_Can" or 
									defName = "JDSPallet_Crate" or 
									defName = "JDS_1ResourcesCrate" or 
									defName = "JDS_2ResourcesCrate" or 
									defName = "JDS_3ResourcesCrate" or 
									defName = "JDS_4ResourcesCrate" or 
									defName = "JDS_5ResourcesCrate" or 
									defName = "JDS_6ResourcesCrate" or 
									defName = "JDS_7ResourcesCrate" or 
									defName = "JDS_8ResourcesCrate" or 
									defName = "JDS_9ResourcesCrate" or 
									defName = "JDS_10ResourcesCrate"]</xpath>
				<value>
					<researchPrerequisites>
						<li>Machining</li>
					</researchPrerequisites>
				</value>
			</li>

		
		


		   <li Class="RR.PatchOperationAddOrReplace">
					<xpath>Defs/ThingDef[defName = "JDSShippingContainerRed" or 
									defName = "JDSShippingContainerBlue" or 
									defName = "JDSShippingContainerGreen" or 
									defName = "JDS_Industrial_Dumpster_Chunk" or 
									defName = "JDS_Industrial_Dumpster_Slag" or 
									defName = "JDSIndustrial_Dumpster" or 
									defName = "JDS_Chemfuel_Storage" or 
									defName = "JDS_Large_Chemfuel_Storage"]</xpath>
				<value>
					<researchPrerequisites>
						<li>DeepDrilling</li>
						<li>Fabrication</li>
					</researchPrerequisites>
				</value>
			</li>

		
		


		   <li Class="RR.PatchOperationAddOrReplace">
					<xpath>Defs/ThingDef[defName = "JDS_Bundles_Wrap" or 
									defName = "JDS_Bundles_Wrap_Big" or 
									defName = "JDS_Bundles_Wrap_Pile"]</xpath>
				<value>
					<researchPrerequisites>
						<li>ComplexFurniture</li>
						<li>ComplexClothing</li>
					</researchPrerequisites>
				</value>
			</li>
		
		

	
		   <li Class="RR.PatchOperationAddOrReplace">
					<xpath>Defs/ThingDef[defName = "JDS_Med_Storage"]</xpath>
				<value>
					<researchPrerequisites>
						<li>ComplexFurniture</li>
						<li>MedicineProduction</li>
					</researchPrerequisites>
				</value>
			</li>
		
		

		
		   <li Class="RR.PatchOperationAddOrReplace">
					<xpath>Defs/ThingDef[defName = "JDSVending_Machine" or 
									defName = "JDSVending_Machine_two" or  
									defName = "JDSIndustrial_shelf" or 
									defName = "JDSIndustrial_shelf_empty" or  
									defName = "JDSSafe" or 
									defName = "JDSBank_Vault"]</xpath>
				<value>
					<researchPrerequisites>
						<li>Fabrication</li>
					</researchPrerequisites>
				</value>
			</li>
		

		
		   <li Class="RR.PatchOperationAddOrReplace">
					<xpath>Defs/ThingDef[defName = "JDS_ChemfuelPump" or defName = "JDS_Large_Post_Box" or defName = "JDSPallet_Box"]</xpath>
				<value>
					<researchPrerequisites>
						<li>Machining</li>
					</researchPrerequisites>
				</value>
			</li>
		

	
		   <li Class="RR.PatchOperationAddOrReplace">
					<xpath>Defs/ThingDef[defName = "JDS_Wooden_Crate_Large"]</xpath>
				<value>
					<researchPrerequisites>
						<li>Machining</li>
					</researchPrerequisites>
				</value>
			</li>
		

		
		   <li Class="RR.PatchOperationAddOrReplace">
					<xpath>Defs/ThingDef[defName = "JDSwheelbarrow"]</xpath>
				<value>
					<researchPrerequisites>
						<li>Smithing</li>
						<li>RR_Agriculture</li>
					</researchPrerequisites>
				</value>
			</li>
		

		
		   <li Class="RR.PatchOperationAddOrReplace">
					<xpath>Defs/ThingDef[defName = "JDSSilo"]</xpath>
				<value>
					<researchPrerequisites>
						<li>AdvancedFabrication</li>
					</researchPrerequisites>
				</value>
			</li>
		
		
	</operations>
	</nomatch> 
	</match>
  </Operation>
	
</Patch>